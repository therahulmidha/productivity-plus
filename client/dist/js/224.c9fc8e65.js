"use strict";(self["webpackChunkproductivity_plus"]=self["webpackChunkproductivity_plus"]||[]).push([[224],{1224:function(e,t,s){s.r(t),s.d(t,{default:function(){return ae}});var i=s(3396),n=s(7139);const o=e=>((0,i.dD)("data-v-74a5df38"),e=e(),(0,i.Cn)(),e),r={class:"d-flex justify-content-between"},a=o((()=>(0,i._)("h1",{class:"my-auto"},"Exercise Scheduler",-1))),d={key:0,class:"my-auto",style:{color:"black"}},l={key:1,class:"my-auto",style:{color:"red"}},c=["disabled"],u={class:"scheduler d-flex justify-content-evenly"},h={class:"col-md-4 mx-2 h-100 d-inline-block my-5"},m={class:"d-flex justify-content-between"},x=o((()=>(0,i._)("h3",null,"Exercises",-1))),p=["disabled"],g={class:"table table-hover"},b=o((()=>(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{scope:"col"},"Name"),(0,i._)("th",{scope:"col"},"Duration"),(0,i._)("th",{scope:"col"},"Break"),(0,i._)("th",{scope:"col"}),(0,i._)("th",{scope:"col"})])],-1))),k={class:"exercise-container"},y=["onClick"],v=["onClick"],_={key:0},f=o((()=>(0,i._)("p",{class:"text-center"},"No Exercises Added Yet!",-1))),E=[f],D={class:"col-md-6 mx-2"},w={key:0,class:"exercise-start-info"},C={key:1,class:"exercise-name"},S={key:2,class:"exercise-duration"};function T(e,t,s,o,f,T){const A=(0,i.up)("ExerciseAddEditModal"),I=(0,i.up)("ExerciseDeleteModal"),M=(0,i.up)("font-awesome-icon");return(0,i.wg)(),(0,i.iD)(i.HY,null,[f.modalAction?((0,i.wg)(),(0,i.j4)(A,{key:0,action:f.modalAction,data:f.currentExerciseData,onSaveExercise:T.saveExercise,onClose:T.closeModal},null,8,["action","data","onSaveExercise","onClose"])):(0,i.kq)("",!0),f.deletionId?((0,i.wg)(),(0,i.j4)(I,{key:1,deletionId:f.deletionId,onConfirmDelete:T.confirmDeletion},null,8,["deletionId","onConfirmDelete"])):(0,i.kq)("",!0),(0,i._)("div",r,[a,f.info?((0,i.wg)(),(0,i.iD)("div",d,(0,n.zw)(f.info),1)):(0,i.kq)("",!0),f.error?((0,i.wg)(),(0,i.iD)("div",l,(0,n.zw)(f.error),1)):(0,i.kq)("",!0),(0,i._)("button",{class:"btn btn-success my-auto",onClick:t[0]||(t[0]=e=>T.toggleStart()),disabled:!f.exercises.length},(0,n.zw)(f.started?"Stop":"Start"),9,c)]),(0,i._)("div",u,[(0,i._)("div",h,[(0,i._)("div",m,[x,(0,i._)("button",{type:"button",onClick:t[1]||(t[1]=e=>T.openModal("Add")),class:"btn btn-primary my-auto",disabled:f.started}," Add ",8,p)]),(0,i._)("table",g,[b,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(f.exercises,(e=>((0,i.wg)(),(0,i.iD)("tbody",{key:e.id},[(0,i._)("tr",k,[(0,i._)("td",null,(0,n.zw)(e.name),1),(0,i._)("td",null,(0,n.zw)(e.duration),1),(0,i._)("td",null,(0,n.zw)(e.break),1),(0,i._)("td",{onClick:t=>T.openModal("Edit",e)},[(0,i.Wm)(M,{icon:"fa-solid fa-edit"})],8,y),(0,i._)("td",{onClick:t=>T.openDeleteModal(e.id)},[(0,i.Wm)(M,{icon:"fa-solid fa-trash"})],8,v)])])))),128))]),f.exercises.length?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",_,E))]),(0,i._)("div",D,[f.started?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",w,(0,n.zw)(f.displayMessage),1)),f.started?((0,i.wg)(),(0,i.iD)("div",C,(0,n.zw)(f.runningExerciseName),1)):(0,i.kq)("",!0),f.started?((0,i.wg)(),(0,i.iD)("div",S,(0,n.zw)(f.runningExerciseDuration),1)):(0,i.kq)("",!0)])])],64)}s(7658);var A=s(9242);const I={key:0,class:"modal",tabindex:"-1",role:"dialog",style:{display:"block"}},M={class:"modal-dialog",role:"document"},q={class:"modal-content"},z={class:"modal-header"},j={class:"modal-title"},N=(0,i._)("span",{"aria-hidden":"true"},"×",-1),Q=[N],B={class:"modal-body"},$={key:0,style:{color:"red"}},O={class:"modal-footer"};function U(e,t,s,o,r,a){return r.modalAction?((0,i.wg)(),(0,i.iD)("div",I,[(0,i._)("div",M,[(0,i._)("div",q,[(0,i._)("div",z,[(0,i._)("h5",j,(0,n.zw)(r.modalAction)+" Exercise",1),(0,i._)("button",{type:"button",class:"close btn btn-lg","data-dismiss":"modal","aria-label":"Close",onClick:t[0]||(t[0]=t=>e.$emit("close"))},Q)]),(0,i._)("div",B,[(0,i.wy)((0,i._)("input",{placeholder:"Name",class:"form-control my-3","onUpdate:modelValue":t[1]||(t[1]=e=>r.name=e)},null,512),[[A.nr,r.name]]),(0,i.wy)((0,i._)("input",{placeholder:"Duration (mm:ss)",class:"form-control my-3","onUpdate:modelValue":t[2]||(t[2]=e=>r.duration=e)},null,512),[[A.nr,r.duration]]),(0,i.wy)((0,i._)("input",{placeholder:"Break (seconds)",class:"form-control my-3","onUpdate:modelValue":t[3]||(t[3]=e=>r.breakTime=e)},null,512),[[A.nr,r.breakTime]]),r.error?((0,i.wg)(),(0,i.iD)("div",$,(0,n.zw)(r.error),1)):(0,i.kq)("",!0)]),(0,i._)("div",O,[(0,i._)("button",{type:"button",class:"btn btn-primary",onClick:t[4]||(t[4]=e=>a.saveChanges())}," Save "),(0,i._)("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal",onClick:t[5]||(t[5]=t=>e.$emit("close"))}," Close ")])])])])):(0,i.kq)("",!0)}var Y={name:"ExerciseAddEditModal",props:{action:String,data:{type:Object,default:{}}},data(){return{modalAction:this.action,id:this.data.id||"",name:this.data.name||"",duration:this.data.duration||"",breakTime:this.data.break||0,error:""}},methods:{saveChanges(){this.name&&this.duration?this.duration.match(/\d\d:\d\d/)?(this.error="",this.$emit("save-exercise",{name:this.name,duration:this.duration,break:this.breakTime,id:this.id})):this.error="Duration should be in format: mm:ss":this.error="Exercise name and duration are mandatory"}}},V=s(89);const W=(0,V.Z)(Y,[["render",U]]);var Z=W;const H={key:0,class:"modal",tabindex:"-1",role:"dialog",style:{display:"block"}},K={class:"modal-dialog",role:"document"},F={class:"modal-content"},G={class:"modal-header"},J=(0,i._)("h5",{class:"modal-title"},"Delete Exercise",-1),L=(0,i._)("span",{"aria-hidden":"true"},"×",-1),P=[L],R=(0,i._)("div",{class:"modal-body"}," Are you sure you want to delete this exercise? ",-1),X={class:"modal-footer"};function ee(e,t,s,n,o,r){return s.deletionId?((0,i.wg)(),(0,i.iD)("div",H,[(0,i._)("div",K,[(0,i._)("div",F,[(0,i._)("div",G,[J,(0,i._)("button",{type:"button",class:"close btn btn-lg","data-dismiss":"modal","aria-label":"Close",onClick:t[0]||(t[0]=e=>r.deleteExercise(!1))},P)]),R,(0,i._)("div",X,[(0,i._)("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=e=>r.deleteExercise(!0))}," Yes "),(0,i._)("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal",onClick:t[2]||(t[2]=e=>r.deleteExercise(!1))}," Close ")])])])])):(0,i.kq)("",!0)}var te={name:"ExerciseAddEditModal",props:{deletionId:String},methods:{deleteExercise(e){this.$emit("confirm-delete",e)}}};const se=(0,V.Z)(te,[["render",ee]]);var ie=se,ne=s(23),oe={components:{ExerciseAddEditModal:Z,ExerciseDeleteModal:ie},data(){return{exercises:[],noOfExercises:0,error:"",info:"",modalAction:"",currentExerciseData:{},deletionId:null,displayMessage:"Add exercises to start a schedule!",started:!1,runningExerciseName:"",runningExerciseDuration:null,runningTimeInSeconds:null,exerciseQueue:[],exerciseTimeout:null,sounds:{break:new Audio(s(2274)),startExercise:new Audio(s(7640))}}},mounted(){ne.j.get("/api/v1/exercises").then((e=>{e.data.length&&(this.exercises=e.data)})).catch((e=>console.log(e)))},watch:{runningTimeInSeconds(e,t){0===e?this.exerciseQueue.length?this.prepareNextExerciseData():(this.started=!1,this.runningExerciseName="",this.runningExerciseDuration=null,this.runningTimeInSeconds=null,this.displayMessage="Well Done!"):this.exerciseTimeout=setTimeout((()=>{this.runningTimeInSeconds--,this.runningExerciseDuration=this.convertSecondsToStringTime(this.runningTimeInSeconds)}),1e3)},noOfExercises(e){this.displayMessage=e?"Click the start button to start the schedule.":"Add exercises to start a schedule!"}},methods:{convertSecondsToStringTime(e){if(e>60){const t=Math.floor(e/60);return this.getDoubleDigitString(t)+":"+this.getDoubleDigitString(e%60)}return"00:"+this.getDoubleDigitString(e)},getDoubleDigitString(e){return e<10?"0"+e:e},prepareNextExerciseData(){const e=this.exerciseQueue[0];this.runningExerciseName=e.name,this.runningExerciseDuration=e.duration,this.runningTimeInSeconds=60*+this.runningExerciseDuration.split(":")[0]+ +this.runningExerciseDuration.split(":")[1],e.isBreak?this.sounds.break.play():this.sounds.startExercise.play(),this.exerciseQueue.splice(0,1)},toggleStart(){this.started=!this.started,this.started?(this.exercises.forEach((e=>{this.exerciseQueue.push({name:e.name,duration:e.duration,isBreak:!1}),e.break&&this.exerciseQueue.push({name:"Break",duration:this.convertSecondsToStringTime(e.break),isBreak:!0})})),this.prepareNextExerciseData()):(this.exerciseQueue=[],clearTimeout(this.exerciseTimeout))},openDeleteModal(e){this.deletionId=e},confirmDeletion(e){if(!e)return void(this.deletionId=null);const t=this.exercises.findIndex((e=>e.id===this.deletionId));-1!==t&&ne.j.delete(`/api/v1/exercises/${this.deletionId}`).then((e=>{204===e.status?(this.exercises.splice(t,1),this.noOfExercises=this.exercises.length):(this.error="Error Deleting the exercise!",setTimeout((()=>{this.error=""}),2e3))})).catch((e=>console.log(e))),this.deletionId=null},openModal(e,t){this.modalAction=e,t&&(this.currentExerciseData=t)},closeModal(){this.modalAction=""},saveExercise(e){this.modalAction="";const t=this.exercises.findIndex((t=>t.id===e.id));-1!==t?ne.j.put(`/api/v1/exercises/${this.exercises[t].id}`,e).then((s=>{204===s.status?(this.exercises[t].name=e.name,this.exercises[t].duration=e.duration,this.exercises[t].break=e.break):(this.error="Error Updating the exercise!",setTimeout((()=>{this.error=""}),2e3))})).catch((e=>console.log(e))):ne.j.post("/api/v1/exercises",e).then((e=>{e.data.id?(this.exercises.push(e.data),this.noOfExercises=this.exercises.length):(this.error="Error Adding the exercise!",setTimeout((()=>{this.error=""}),2e3))})).catch((e=>console.log(e)))}}};const re=(0,V.Z)(oe,[["render",T],["__scopeId","data-v-74a5df38"]]);var ae=re},2274:function(e,t,s){e.exports=s.p+"media/break_bell.f7f9d88c.mp3"},7640:function(e,t,s){e.exports=s.p+"media/start_exercise.913a71fc.wav"}}]);
//# sourceMappingURL=224.c9fc8e65.js.map