"use strict";(self["webpackChunkproductivity_plus"]=self["webpackChunkproductivity_plus"]||[]).push([[832],{2832:function(e,t,i){i.r(t),i.d(t,{default:function(){return le}});var s=i(3396),n=i(7139);const o=e=>((0,s.dD)("data-v-5d2e2855"),e=e(),(0,s.Cn)(),e),r={class:"d-flex justify-content-between"},a=o((()=>(0,s._)("h1",{class:"my-auto"},"Exercise Scheduler",-1))),l={key:0,class:"my-auto",style:{color:"black"}},d={key:1,class:"my-auto",style:{color:"red"}},c=["disabled"],u={class:"scheduler d-flex flex-wrap justify-content-evenly"},h={class:"col-md-4 mx-2 d-inline-block my-5"},m={class:"d-flex justify-content-between"},x=o((()=>(0,s._)("h3",null,"Exercises",-1))),p=["disabled"],g={class:"table table-hover"},b=o((()=>(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",{scope:"col"},"Name"),(0,s._)("th",{scope:"col"},"Duration"),(0,s._)("th",{scope:"col"},"Break"),(0,s._)("th",{scope:"col"}),(0,s._)("th",{scope:"col"}),(0,s._)("th",{scope:"col"})])],-1))),k={class:"exercise-container"},y=["onClick"],v=["onClick"],_=["onClick"],f={key:0},D=o((()=>(0,s._)("p",{class:"text-center"},"No Exercises Added Yet!",-1))),E=[D],w={class:"col-md-6 mx-auto p-5"},S={key:0,class:"exercise-start-info"},T={key:1,class:"exercise-name"},C={key:2,class:"exercise-duration"};function I(e,t,i,o,D,I){const A=(0,s.up)("ExerciseAddEditModal"),M=(0,s.up)("ExerciseDeleteModal"),z=(0,s.up)("font-awesome-icon");return(0,s.wg)(),(0,s.iD)("div",null,[D.modalAction?((0,s.wg)(),(0,s.j4)(A,{key:0,action:D.modalAction,data:D.currentExerciseData,onSaveExercise:I.saveExercise,onClose:I.closeModal},null,8,["action","data","onSaveExercise","onClose"])):(0,s.kq)("",!0),D.deletionId?((0,s.wg)(),(0,s.j4)(M,{key:1,deletionId:D.deletionId,onConfirmDelete:I.confirmDeletion},null,8,["deletionId","onConfirmDelete"])):(0,s.kq)("",!0),(0,s._)("div",r,[a,D.info?((0,s.wg)(),(0,s.iD)("div",l,(0,n.zw)(D.info),1)):(0,s.kq)("",!0),D.error?((0,s.wg)(),(0,s.iD)("div",d,(0,n.zw)(D.error),1)):(0,s.kq)("",!0),(0,s._)("button",{class:"btn btn-success my-auto",onClick:t[0]||(t[0]=e=>I.toggleStart()),disabled:!D.exercises.length},(0,n.zw)(D.started?"Stop":"Start"),9,c)]),(0,s._)("div",u,[(0,s._)("div",h,[(0,s._)("div",m,[x,(0,s._)("h3",null,(0,n.zw)(D.totalDuration),1),(0,s._)("button",{type:"button",onClick:t[1]||(t[1]=e=>I.openModal("Add")),class:"btn btn-primary my-auto",disabled:D.started}," Add ",8,p)]),(0,s._)("table",g,[b,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(D.exercises,((e,t)=>((0,s.wg)(),(0,s.iD)("tbody",{key:e.id},[(0,s._)("tr",k,[(0,s._)("td",null,(0,n.zw)(e.name),1),(0,s._)("td",null,(0,n.zw)(e.duration),1),(0,s._)("td",null,(0,n.zw)(e.break),1),(0,s._)("td",{onClick:e=>{D.startingIndex=t,I.toggleStart()}},[(0,s.Wm)(z,{icon:"fa-solid fa-play"})],8,y),(0,s._)("td",{onClick:t=>I.openModal("Edit",e)},[(0,s.Wm)(z,{icon:"fa-solid fa-edit"})],8,v),(0,s._)("td",{onClick:t=>I.openDeleteModal(e.id)},[(0,s.Wm)(z,{icon:"fa-solid fa-trash"})],8,_)])])))),128))]),D.exercises.length?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",f,E))]),(0,s._)("div",w,[D.started?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",S,(0,n.zw)(D.displayMessage),1)),D.started?((0,s.wg)(),(0,s.iD)("div",T,(0,n.zw)(D.runningExerciseName),1)):(0,s.kq)("",!0),D.started?((0,s.wg)(),(0,s.iD)("div",C,(0,n.zw)(D.runningExerciseDuration),1)):(0,s.kq)("",!0)])])])}i(7658);var A=i(9242);const M={key:0,class:"modal",tabindex:"-1",role:"dialog",style:{display:"block"}},z={class:"modal-dialog",role:"document"},q={class:"modal-content"},N={class:"modal-header"},j={class:"modal-title"},Q=(0,s._)("span",{"aria-hidden":"true"},"×",-1),B=[Q],$={class:"modal-body"},O={key:0,style:{color:"red"}},U={class:"modal-footer"};function W(e,t,i,o,r,a){return r.modalAction?((0,s.wg)(),(0,s.iD)("div",M,[(0,s._)("div",z,[(0,s._)("div",q,[(0,s._)("div",N,[(0,s._)("h5",j,(0,n.zw)(r.modalAction)+" Exercise",1),(0,s._)("button",{type:"button",class:"close btn btn-lg","data-dismiss":"modal","aria-label":"Close",onClick:t[0]||(t[0]=t=>e.$emit("close"))},B)]),(0,s._)("div",$,[(0,s.wy)((0,s._)("input",{placeholder:"Name",class:"form-control my-3","onUpdate:modelValue":t[1]||(t[1]=e=>r.name=e)},null,512),[[A.nr,r.name]]),(0,s.wy)((0,s._)("input",{placeholder:"Duration (mm:ss)",class:"form-control my-3","onUpdate:modelValue":t[2]||(t[2]=e=>r.duration=e)},null,512),[[A.nr,r.duration]]),(0,s.wy)((0,s._)("input",{placeholder:"Break (seconds)",class:"form-control my-3","onUpdate:modelValue":t[3]||(t[3]=e=>r.breakTime=e)},null,512),[[A.nr,r.breakTime]]),r.error?((0,s.wg)(),(0,s.iD)("div",O,(0,n.zw)(r.error),1)):(0,s.kq)("",!0)]),(0,s._)("div",U,[(0,s._)("button",{type:"button",class:"btn btn-primary",onClick:t[4]||(t[4]=e=>a.saveChanges())}," Save "),(0,s._)("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal",onClick:t[5]||(t[5]=t=>e.$emit("close"))}," Close ")])])])])):(0,s.kq)("",!0)}var V={name:"ExerciseAddEditModal",props:{action:String,data:{type:Object,default:{}}},data(){return{modalAction:this.action,id:this.data.id||"",name:this.data.name||"",duration:this.data.duration||"",breakTime:this.data.break||0,error:""}},methods:{saveChanges(){this.name&&this.duration?this.duration.match(/\d\d:\d\d/)?(this.error="",this.$emit("save-exercise",{name:this.name,duration:this.duration,break:this.breakTime,id:this.id})):this.error="Duration should be in format: mm:ss":this.error="Exercise name and duration are mandatory"}}},Y=i(89);const Z=(0,Y.Z)(V,[["render",W]]);var H=Z;const K={key:0,class:"modal",tabindex:"-1",role:"dialog",style:{display:"block"}},F={class:"modal-dialog",role:"document"},G={class:"modal-content"},J={class:"modal-header"},L=(0,s._)("h5",{class:"modal-title"},"Delete Exercise",-1),P=(0,s._)("span",{"aria-hidden":"true"},"×",-1),R=[P],X=(0,s._)("div",{class:"modal-body"}," Are you sure you want to delete this exercise? ",-1),ee={class:"modal-footer"};function te(e,t,i,n,o,r){return i.deletionId?((0,s.wg)(),(0,s.iD)("div",K,[(0,s._)("div",F,[(0,s._)("div",G,[(0,s._)("div",J,[L,(0,s._)("button",{type:"button",class:"close btn btn-lg","data-dismiss":"modal","aria-label":"Close",onClick:t[0]||(t[0]=e=>r.deleteExercise(!1))},R)]),X,(0,s._)("div",ee,[(0,s._)("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=e=>r.deleteExercise(!0))}," Yes "),(0,s._)("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal",onClick:t[2]||(t[2]=e=>r.deleteExercise(!1))}," Close ")])])])])):(0,s.kq)("",!0)}var ie={name:"ExerciseAddEditModal",props:{deletionId:String},methods:{deleteExercise(e){this.$emit("confirm-delete",e)}}};const se=(0,Y.Z)(ie,[["render",te]]);var ne=se,oe=i(23),re={components:{ExerciseAddEditModal:H,ExerciseDeleteModal:ne},data(){return{exercises:[],noOfExercises:0,error:"",info:"",modalAction:"",currentExerciseData:{},deletionId:null,displayMessage:"",started:!1,runningExerciseName:"",runningExerciseDuration:null,runningTimeInSeconds:null,exerciseQueue:[],exerciseTimeout:null,sounds:{break:new Audio(i(2274)),startExercise:new Audio(i(7640))},startingIndex:0,totalDuration:0}},mounted(){oe.j.get("/api/v1/exercises").then((e=>{if(e.data.length){this.exercises=e.data,this.displayMessage=0===this.exercises.length?"Add exercises to start a schedule!":"Click the start button to start the schedule.";try{this.totalDuration=this.convertSecondsToStringTime(e.data.map((e=>this.convertStringTimeToSeconds(e.duration)+e.break)).reduce(((e,t)=>e+t)))}catch(t){this.totalDuration="NA"}}})).catch((e=>console.log(e)))},watch:{runningTimeInSeconds(e,t){0===e?this.exerciseQueue.length?this.prepareNextExerciseData():(this.started=!1,this.runningExerciseName="",this.runningExerciseDuration=null,this.runningTimeInSeconds=null,this.displayMessage="Well Done!",clearTimeout(this.exerciseTimeout),this.exerciseTimeout=null,this.startingIndex=0):this.exerciseTimeout=setTimeout((()=>{this.runningTimeInSeconds--,this.runningExerciseDuration=this.convertSecondsToStringTime(this.runningTimeInSeconds)}),1e3)},noOfExercises(e){e?e>0&&(this.displayMessage="Click the start button to start the schedule."):this.displayMessage="Add exercises to start a schedule!"}},methods:{convertSecondsToStringTime(e){if(e>60){const t=Math.floor(e/60);return this.getDoubleDigitString(t)+":"+this.getDoubleDigitString(e%60)}return"00:"+this.getDoubleDigitString(e)},getDoubleDigitString(e){return e<10?"0"+e:e},convertStringTimeToSeconds(e){const t=e.split(":");return 60*+t[0]+ +t[1]},prepareNextExerciseData(){const e=this.exerciseQueue[0];this.runningExerciseName=e.name,this.runningExerciseDuration=e.duration,this.runningTimeInSeconds=60*+this.runningExerciseDuration.split(":")[0]+ +this.runningExerciseDuration.split(":")[1],e.isBreak?this.sounds.break.play():this.sounds.startExercise.play(),this.exerciseQueue.splice(0,1)},toggleStart(){this.started=!this.started,this.started?(this.exercises.slice(this.startingIndex).forEach((e=>{this.exerciseQueue.push({name:e.name,duration:e.duration,isBreak:!1}),e.break&&this.exerciseQueue.push({name:"Break",duration:this.convertSecondsToStringTime(e.break),isBreak:!0})})),this.prepareNextExerciseData()):(this.exerciseQueue=[],clearTimeout(this.exerciseTimeout))},openDeleteModal(e){this.deletionId=e},confirmDeletion(e){if(!e)return void(this.deletionId=null);const t=this.exercises.findIndex((e=>e.id===this.deletionId));-1!==t&&oe.j.delete(`/api/v1/exercises/${this.deletionId}`).then((e=>{204===e.status?(this.exercises.splice(t,1),this.noOfExercises=this.exercises.length):(this.error="Error Deleting the exercise!",setTimeout((()=>{this.error=""}),2e3))})).catch((e=>console.log(e))),this.deletionId=null},openModal(e,t){this.modalAction=e,t&&(this.currentExerciseData=t)},closeModal(){this.modalAction=""},saveExercise(e){this.modalAction="";const t=this.exercises.findIndex((t=>t.id===e.id));-1!==t?oe.j.put(`/api/v1/exercises/${this.exercises[t].id}`,e).then((i=>{204===i.status?(this.exercises[t].name=e.name,this.exercises[t].duration=e.duration,this.exercises[t].break=e.break):(this.error="Error Updating the exercise!",setTimeout((()=>{this.error=""}),2e3))})).catch((e=>console.log(e))):oe.j.post("/api/v1/exercises",e).then((e=>{e.data.id?(this.exercises.push(e.data),this.noOfExercises=this.exercises.length):(this.error="Error Adding the exercise!",setTimeout((()=>{this.error=""}),2e3))})).catch((e=>console.log(e)))}}};const ae=(0,Y.Z)(re,[["render",I],["__scopeId","data-v-5d2e2855"]]);var le=ae},2274:function(e,t,i){e.exports=i.p+"media/break_bell.f7f9d88c.mp3"},7640:function(e,t,i){e.exports=i.p+"media/start_exercise.913a71fc.wav"}}]);
//# sourceMappingURL=832.368c349d.js.map